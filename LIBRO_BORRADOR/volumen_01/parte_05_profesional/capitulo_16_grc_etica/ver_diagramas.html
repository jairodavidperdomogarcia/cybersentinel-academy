<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Visualizador Cap√≠tulo 16 - GRC</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #0a192f; color: #ccd6f6; padding: 20px; max-width: 900px; margin: 0 auto; }
        .mermaid { background: #112240; padding: 20px; border-radius: 5px; margin: 20px 0; text-align: center; }
        h1, h2, h3 { color: #64ffda; }
        code { background: #233554; padding: 2px 5px; border-radius: 3px; }
        pre { background: #112240; padding: 15px; border-radius: 5px; overflow-x: auto; }
        blockquote { border-left: 5px solid #64ffda; padding-left: 15px; color: #8892b0; margin: 20px 0; }
        a { color: #64ffda; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div id="content"></div>
    <script>
        // Contenido del README con backticks escapadas para el string de JS
        const markdown = `
# Cap√≠tulo 16: GRC, √âtica y la Ley

> "Tu c√≥digo puede ser perfecto. Tu √©tica determina si terminas como h√©roe o en prisi√≥n."

### Diagrama: CyberSentinel GRC Dashboard (visi√≥n ejecutiva)

\`\`\`mermaid
flowchart TB
    subgraph DASH["CYBERSENTINEL GRC DASHBOARD"]
        CUMPL["üìä Cumplimiento: 40/100\n‚ö†Ô∏è Riesgo: ALTO"]
        IMPACTO["üí∞ Impacto financiero\n‚Ä¢ ALE evitado: $720,000\n‚Ä¢ ROI automatizaci√≥n: -92% ‚Üí +72% (proyecci√≥n)\n‚Ä¢ Payback: 21 meses"]
        CAPACIDADES["üîß Capacidades automatizadas\n‚úì Detecci√≥n f√≠sico-digital (Cap 12)\n‚úì An√°lisis IA de logs (Cap 13)\n‚úì Respuesta SOAR (Cap 15)\n‚úó Auditor√≠a continua (en desarrollo)"]
        RECOM["üéØ Recomendaci√≥n\nInvertir 75k‚Ç¨ en automatizaci√≥n completa\nRetorno estimado: +72% en 3 a√±os"]
    end

    CUMPL --> IMPACTO --> CAPACIDADES --> RECOM
\`\`\`

Este dashboard es la s√≠ntesis de todo el Volumen 1: lo que construiste en los cap√≠tulos t√©cnicos ahora se traduce en lenguaje ejecutivo.

## 16.0 Inmersi√≥n: El Caso Real que Destruy√≥ una Carrera (y una Empresa)

> Caso real: Equifax 2017 ‚Äì La lecci√≥n de 700 millones de d√≥lares

### Contexto

- Empresa: Equifax, una de las tres mayores agencias de cr√©dito de Estados Unidos.  
- Datos comprometidos: alrededor de 147 millones de registros con SSN, n√∫meros de tarjetas y direcciones.  
- Multa y acuerdos: hasta 700 millones de d√≥lares en multas y compensaciones a consumidores afectados (FTC, CFPB y estados de EE. UU.).  

### Lo que ocurri√≥ t√©cnicamente

- Marzo 2017: se anuncia una vulnerabilidad cr√≠tica en Apache Struts (CVE‚Äë2017‚Äë5638).  
- Equifax recibe alerta interna para aplicar el parche.  
- El ticket de parcheo nunca se ejecuta en el servidor cr√≠tico expuesto a Internet.  
- Mayo 2017: atacantes explotan la vulnerabilidad en el portal de disputas.  
- Mayo‚ÄìJulio 2017: los atacantes se mueven lateralmente, encuentran credenciales en texto plano y extraen datos durante semanas.  
- Julio 2017: Equifax detecta actividad sospechosa y descubre la brecha (despu√©s de casi 80 d√≠as).  

### Lo que ocurri√≥ legalmente y en GRC

1. **Reguladores financieros (SEC y otros):**  
   - La empresa tard√≥ semanas en comunicar la brecha al mercado.  
   - Durante ese tiempo, directivos vendieron acciones antes de que la noticia fuera p√∫blica.  
2. **Protecci√≥n de datos personales:**  
   - Millones de ciudadanos afectados en Estados Unidos y otros pa√≠ses.  
   - Falta de medidas razonables de seguridad sobre datos extremadamente sensibles.  
3. **Demandas civiles masivas:**  
   - Acciones colectivas de consumidores y accionistas.  
   - Acuerdos econ√≥micos por cientos de millones de d√≥lares.  

### Consecuencias personales y corporativas

- CISO despedido y objeto de demandas.  
- CEO obligado a renunciar bajo presi√≥n.  
- Accionistas pierden miles de millones en valor de mercado.  
- Equifax queda marcada como ejemplo mundial de mala gesti√≥n de ciberseguridad y GRC.  

### Diagrama: Equifax ‚Äì donde fall√≥ el puente GRC

\`\`\`mermaid
flowchart LR
    VULN["Vulnerabilidad t√©cnica\nCVE-2017-5638"] --> FALLA_GRC["Falla GRC\nSin proceso de parcheo cr√≠tico"]
    FALLA_GRC --> SILO["Silo t√©cnico\nEl parche no se aplica"]
    SILO --> CONSEQ["Consecuencias"]

    CONSEQ --> LEGAL["Legal\nMultas SEC/FTC"]
    CONSEQ --> FIN["Financiero\n‚âà 700M USD impacto"]
    CONSEQ --> REP["Reputacional\nDestrucci√≥n de confianza"]

    subgraph SOL["C√≥mo lo evita un enfoque CyberSentinel"]
        PATCH["Parche ‚Üí Ticket autom√°tico"] --> SOAR["SOAR ejecuta playbook"] --> TRACK["Track en dashboard GRC"]
    end
\`\`\`

Este caso muestra qu√© ocurre cuando existe un **silo t√©cnico**: la vulnerabilidad se conoce, pero el proceso GRC falla y nadie se hace responsable del parche cr√≠tico.

### La pregunta clave

¬øFue un fracaso t√©cnico o un fracaso de GRC?

**Respuesta: ambos.**

- T√©cnico: no se parch√≥ una vulnerabilidad cr√≠tica conocida.  
- De GRC: no exist√≠an procesos eficaces para priorizar parches cr√≠ticos ni supervisar su ejecuci√≥n.  
- Legal: no se inform√≥ a tiempo a reguladores, inversionistas y consumidores.  
- √âtico: mientras los consumidores quedaban expuestos, algunos ejecutivos se proteg√≠an vendiendo acciones.  

Tu nueva perspectiva como CyberSentinel:

- Hasta el Cap 15: la pregunta era **‚Äú¬øpuedo hackearlo/protegerlo?‚Äù**  
- Desde el Cap 16: la pregunta pasa a ser **‚Äú¬ødebo hackearlo/protegerlo? ¬øqu√© leyes aplican? ¬øqu√© riesgos financieros y √©ticos hay?‚Äù**  

En los cap√≠tulos anteriores (01‚Äë15), aprendiste a proteger m√°quinas. En este cap√≠tulo, aprender√°s a proteger a la **organizaci√≥n** y a ti mismo frente a la ley.

---

## 16.1 El Tri√°ngulo GRC: El Escudo Legal

Si el firewall es tu escudo digital, GRC es tu escudo legal y corporativo.

1. **Gobernanza (Governance):** las reglas del juego y qui√©n decide.  
2. **Riesgo (Risk):** el mapa de minas de la organizaci√≥n.  
3. **Cumplimiento (Compliance):** seguir las reglas del juego y demostrarlo.  

### Diagrama 1: El ecosistema GRC completo

\`\`\`mermaid
flowchart TB
    subgraph GOV["GOBERNANZA\n¬´Las reglas del juego¬ª"]
        G1["‚Ä¢ Pol√≠ticas de seguridad\n‚Ä¢ Roles y responsabilidades\n‚Ä¢ Comit√©s de seguridad\n‚Ä¢ Aprobaci√≥n de proyectos"]
        G2["Caso Equifax:\n‚Ä¢ Sin proceso claro para parches cr√≠ticos\n‚Ä¢ CISO sin autoridad efectiva\n‚Ä¢ Supervisi√≥n d√©bil del riesgo"]
    end

    subgraph RISK["RIESGO\n¬´El mapa de minas¬ª"]
        R1["‚Ä¢ Identificaci√≥n de amenazas\n‚Ä¢ Probabilidad √ó impacto\n‚Ä¢ Aceptar / transferir / mitigar\n‚Ä¢ Monitoreo continuo"]
        R2["Caso Equifax:\n‚Ä¢ Subestimaci√≥n de CVE cr√≠tica\n‚Ä¢ Sin c√°lculo de p√©rdidas potenciales\n‚Ä¢ Sin seguro cibern√©tico adecuado"]
    end

    subgraph COMP["CUMPLIMIENTO\n¬´Seguir las reglas¬ª"]
        C1["‚Ä¢ Normativas de datos y sectoriales\n‚Ä¢ Est√°ndares (ISO 27001, NIST CSF, CIS)\n‚Ä¢ Auditor√≠as y evidencias"]
        C2["Caso Equifax:\n‚Ä¢ Acuerdos y sanciones\n‚Ä¢ Obligaciones de compensaci√≥n a afectados"]
    end

    GOV --> RISK --> COMP
\`\`\`

El mensaje central: **si falla GRC, aunque tu tecnolog√≠a sea avanzada, la organizaci√≥n puede hundirse igual que Equifax.**

---

## 16.2 Matem√°ticas del Miedo: C√°lculo de Riesgo Cuantitativo

Como profesional, no puedes ir al CEO y decir "Tengo miedo de los hackers". Debes hablar en dinero.

### La F√≥rmula Maestra:
$$ ALE = SLE \times ARO $$

- **AV (Asset Value):** valor del activo.  
- **EF (Exposure Factor):** porcentaje de p√©rdida si ocurre el ataque.  
- **SLE (Single Loss Expectancy):** p√©rdida por incidente.  
- **ARO (Annualized Rate of Occurrence):** frecuencia anual.  
- **ALE (Annualized Loss Expectancy):** p√©rdida esperada al a√±o.  

### Ejemplo completo: Equifax 2017 en n√∫meros

\`\`\`mermaid
flowchart TB
    AV["AV\nValor del activo"] --> EF["EF\nFactor de exposici√≥n"] --> SLE["SLE\nP√©rdida por incidente"] --> ARO["ARO\nFrecuencia anual"] --> ALE["ALE\nP√©rdida anual esperada"]

    AVVAL["Equifax:\nAV ‚âà 1.000M USD"] --> AV
    EFVAL["EF = 0,8"] --> EF
    SLEVAL["SLE = 800M USD"] --> SLE
    AROVAL["ARO = 0,9"] --> ARO
    ALEVAL["ALE ‚âà 720M USD"] --> ALE
\`\`\`

Decisi√≥n de negocio:

- Coste de control (parchear Apache Struts): horas de trabajo del equipo, coste marginal.  
- ALE estimado: alrededor de 720 millones de d√≥lares.  

El fallo de Equifax: **ignorar este c√°lculo de riesgo**. El resultado real estuvo en el mismo orden de magnitud (acuerdos y mejoras obligatorias por cientos de millones de d√≥lares).

### Diagrama: Flujo de datos real ‚Äì Incidente ‚Üí ROI

\`\`\`mermaid
flowchart TB
    INC14["Cap 14: Incidente ransomware"] --> LOG["/cybersentinel/logs/incident_INC-*.json"]
    LOG --> AUD["Cap 16: Auditor GRC\nlee archivo real"]

    AUD --> ALE_CALC["üìä Calcula ALE/SLE"]
    AUD --> ROI_CALC["üí∞ Calcula ROI de automatizaci√≥n"]

    ALE_CALC --> DASH["Dashboard ejecutivo"]
    ROI_CALC --> DASH

    DASH --> ROI_NEG["ROI inicial negativo\n(ejemplo: -92%)"]
    ROI_NEG --> AJUSTES["Ajuste de supuestos de negocio\n(costes reales, incidentes/a√±o, tiempo ahorrado)"]
    AJUSTES --> ROI_POS["ROI proyectado positivo\n(+72% a 3 a√±os)"]
\`\`\`

Este flujo muestra que tus n√∫meros de riesgo y ROI no son te√≥ricos: salen de incidentes reales generados por el emulador y procesados por tu propio c√≥digo.

---

## 16.3 √âtica del Centinela: Grey Hat vs. White Hat

Ahora que tienes herramientas poderosas (Kali, Metasploit, scripts de Python), la l√≠nea entre un profesional y un criminal es solo tu **intenci√≥n** y tu **permiso**.

### 16.3.1 C√≥digo de honor

1. **Nunca escanees sin permiso escrito.**  
2. **Privacidad ante todo:** si encuentras datos personales, no los lees ni los guardas, solo reportas su existencia.  
3. **Divulgaci√≥n responsable:** cuando encuentras una vulnerabilidad en software o servicios p√∫blicos, contactas primero al proveedor, das tiempo razonable para corregir y luego, si aplica, publicas.  

### 16.3.2 Casos reales de decisiones dif√≠ciles

**Caso 1: Bug Bounty vs cibercrimen ‚Äì plataforma global 2013**

Escenario: descubres una vulnerabilidad grave en una red social masiva.

- Opci√≥n A (Black Hat): vender el exploit en la dark web.  
- Opci√≥n B (Grey Hat): publicarlo en redes sociales para ganar fama.  
- Opci√≥n C (White Hat): reportarlo al programa oficial de Bug Bounty.  

En m√∫ltiples casos reales, quienes eligieron A o B terminaron enfrentando cargos penales o demandas. Quienes eligieron C terminaron con recompensa econ√≥mica y, a veces, ofertas de trabajo.

Un modo de verlo en ‚Äúmodo funci√≥n‚Äù:

\`\`\`python
def ethical_decision(scenario):
    if scenario == "find_vulnerability_in_platform":
        return "OPCION_C_BUG_BOUNTY"
    return "CONSULTAR_CODIGO_DE_ETICA"
\`\`\`

**Caso 2: Pentester en hospital ‚Äì datos fuera de alcance**

Escenario:

- Alcance del contrato: servidores web.  
- Hallazgo inesperado: acceso a base de datos con diagn√≥sticos de pacientes.  

Opciones:

1. Ignorar y seguir (‚Äúno es mi problema‚Äù).  
2. Detener pruebas y notificar inmediatamente al cliente por escrito.  
3. Seguir, recolectar m√°s evidencia y reportar despu√©s.  

La referencia de buenas pr√°cticas profesionales es clara:

- Detener el ejercicio.  
- Notificar al cliente por escrito.  
- Pedir autorizaci√≥n expl√≠cita para continuar.  
- Si no se autoriza, cerrar el engagement.  

**Caso 3: Datos de la competencia ‚Äì tentaci√≥n de espionaje**

Escenario:

- Rol: analista de seguridad.  
- Investigaci√≥n: posible exfiltraci√≥n de datos.  
- Hallazgo: copia completa de base de datos de un competidor, robada a√±os atr√°s.  

Tentaci√≥n: usar esos datos para ganar mercado.  

√âtica profesional:

1. Aislar de inmediato los datos y no explorarlos.  
2. Escalar a Legal/Compliance.  
3. Seguir la pol√≠tica de la organizaci√≥n.  
4. Si la empresa insiste en usar esa informaci√≥n, plantearse la objeci√≥n formal o incluso la renuncia y, en ciertos marcos legales, la figura de denunciante (whistleblower).  

Casos similares en la vida real han terminado en multas millonarias y reputaciones destruidas.

### 16.3.3 Normativas clave ‚Äì mapa visual

#### Protecci√≥n de datos personales

- **GDPR (UE):** aplica a empresas que tratan datos de ciudadanos europeos. Multas de hasta el 4 % de la facturaci√≥n anual global o 20 millones de euros. Claves: consentimiento expl√≠cito, derecho al olvido, notificaci√≥n de brechas en 72 horas.  
- **Leyes nacionales (por ejemplo, LOPD/GDPR adaptado):** regulan el tratamiento de datos personales a nivel pa√≠s. Requieren registros de actividades de tratamiento y evaluaciones de impacto.  
- **CCPA/CPRA (California):** otorga a los residentes de California derechos sobre sus datos (conocer, borrar, optar por que no se vendan). Multas por cada violaci√≥n.  

#### Sectores espec√≠ficos

- **HIPAA (EE. UU., salud):** regula informaci√≥n de salud protegida (PHI). Multas significativas por exposici√≥n o uso indebido.  
- **PCI‚ÄëDSS (tarjetas de pago):** exige controles t√©cnicos para quien procese, almacene o transmita datos de tarjetas. Sanciones econ√≥micas y p√©rdida de capacidad de procesar pagos en caso de incumplimiento.  
- **NIST CSF:** marco de ciberseguridad ampliamente usado en contratos con gobierno y sectores cr√≠ticos (Identify, Protect, Detect, Respond, Recover).  

#### Est√°ndares internacionales

- **ISO 27001:** sistema de gesti√≥n de seguridad de la informaci√≥n basado en el ciclo PDCA (Plan‚ÄëDo‚ÄëCheck‚ÄëAct).  
- **CIS Controls:** conjunto priorizado de controles t√©cnicos, organizado por niveles (b√°sico, avanzado, experto).  

---

## 16.4 Laboratorio 16: Auditor de Cumplimiento Integrado con Emulador

Objetivo: crear un sistema de auditor√≠a que:

- Verifique cumplimiento de m√∫ltiples requisitos b√°sicos.  
- Calcule riesgo cuantitativo simple (ALE) sobre un activo cr√≠tico.  
- Genere un breve reporte ejecutivo orientado a direcci√≥n.  
- Se integre con el dashboard del emulador mediante un archivo de salida.  

### Parte A: Auditor√≠a t√©cnica b√°sica (Compliance as Code)

Punto de partida: el script \`compliance_auditor.py\` incluido en este cap√≠tulo.

Checks m√≠nimos:

1. El usuario \`root\` no debe poder iniciar sesi√≥n por SSH.  
2. La autenticaci√≥n por contrase√±a en SSH debe estar deshabilitada.  
3. No debe haber archivos con permisos 777 en el directorio web (\`/var/www/html\` en el emulador).  
4. El firewall debe estar activo.  

Ejecuta el script en el emulador y analiza los hallazgos y la puntuaci√≥n.

Salida esperada (resumen):

- Reporte en consola con hallazgos \`PASS / FAIL / WARN\`.  
- Puntuaci√≥n final de cumplimiento sobre 100.  
- Preguntas finales para tu bit√°cora de GRC (entrenador cr√≠tico).  

### Parte B: C√°lculo de riesgo cuantitativo

Elige un activo del emulador (por ejemplo, el servidor web principal) y as√≠gnale:

- AV: valor del activo en dinero (estimado).  
- EF: porcentaje de impacto si se materializan los fallos encontrados.  
- ARO: probabilidad anual de ocurrencia del incidente.  

Calcula SLE y ALE para ese activo y documenta el resultado en tu cuaderno de misi√≥n.

---

## 16.5 Ruta GRC Profunda: De -92% a +72% ROI

Este cap√≠tulo tambi√©n es tu puente directo al lenguaje de negocio. A partir de la integraci√≥n con los cap√≠tulos 14 y 15, puedes usar datos reales del emulador para construir un caso ejecutivo completo.

### Diagrama: El puente t√©cnico-GRC

\`\`\`mermaid
flowchart LR
    subgraph TEC["Cap 12‚Äì15:\nAutomatizaci√≥n t√©cnica"]
        T1["Scripts / Playbooks / SIEM"]
        T2["Pregunta: ¬´¬øC√ìMO lo hacemos?¬ª"]
    end

    subgraph NEG["Cap 16:\nLenguaje de negocio"]
        B1["ROI / ALE / Compliance"]
        B2["Pregunta: ¬´¬øPOR QU√â lo hacemos?¬ª"]
    end

    TEC --> PUENTE["Puente CyberSentinel\nTraducci√≥n autom√°tica t√©cnico ‚Üí ejecutivo"] --> NEG
\`\`\`

Lo que ya construiste (visi√≥n ejecutiva):

- Cap 12: Visi√≥n computacional ‚Äì correlaci√≥n f√≠sico‚Äëdigital.  
- Cap 13: Security LLM ‚Äì an√°lisis y priorizaci√≥n asistida por IA.  
- Cap 15: SOAR Engine ‚Äì orquestaci√≥n con m√∫ltiples playbooks.  
- Cap 16: El traductor ‚Äì convierte todo eso en lenguaje de dinero, riesgo y cumplimiento.

### Paso 1 ‚Äì Valida tus datos reales

1. Ejecuta el resumen para el dashboard:
   - \`python3 compliance_auditor.py --dashboard\`
2. Anota tres n√∫meros:
   - Puntuaci√≥n de cumplimiento (0‚Äì100).
   - ROI de automatizaci√≥n frente a ransomware (porcentaje, puede ser negativo).
   - Impacto de negocio estimado (Low / Medium / High).
3. Verifica el √∫ltimo incidente de ransomware:
   - \`ls -la /cybersentinel/logs/incident_*.json\`
   - \`cat incident_INC-XXXX.json | grep -A5 -B5 "business_assumptions"\`

### Paso 2 ‚Äì Interpreta el ROI negativo

Si el ROI te sale negativo (por ejemplo, -92%), no es un error, es una historia:

- Coste de automatizaci√≥n alto frente a pocos incidentes o poco tiempo ahorrado.
- Situaci√≥n com√∫n en empresas que est√°n empezando su viaje de SOAR.

### Diagrama: De -92% a +72% ROI ‚Äì El viaje

\`\`\`mermaid
flowchart TB
    E1["Etapa 1: Diagn√≥stico crudo\nROI = -92%\n‚Ä¢ Coste automatizaci√≥n: 50k‚Ç¨\n‚Ä¢ Ahorro peque√±o\n‚Ä¢ Conclusi√≥n: ¬´No vale¬ª"]
    E2["Etapa 2: An√°lisis realista\nAjuste de supuestos\n‚Ä¢ Coste real por hora: 250‚Ç¨ (no 100‚Ç¨)\n‚Ä¢ Tiempo ahorrado real: 23h (no 8h)\n‚Ä¢ Incidentes/a√±o reales: 8 (no 5)"]
    E3["Etapa 3: Proyecci√≥n ejecutiva\n‚Ä¢ ROI 3 a√±os: +72%\n‚Ä¢ Payback: 21 meses\n‚Ä¢ Decisi√≥n: ¬´Invertir 75k‚Ç¨¬ª"]

    E1 --> E2 --> E3
\`\`\`

Preguntas que puedes llevar a direcci√≥n:

- "¬øNuestro coste por hora incluye solo salario o tambi√©n multas, reputaci√≥n y ventas perdidas?"
- "¬øCu√°ntos incidentes reales tuvimos el √∫ltimo a√±o?"
- "¬øQu√© porcentaje del MTTR es b√∫squeda de informaci√≥n y qu√© porcentaje es contenci√≥n real?"

### Paso 3 ‚Äì Dise√±a tu artefacto ejecutivo

Usa la plantilla incluida en los recursos del cap√≠tulo para crear tu propio informe de valor:

[üìÑ Plantilla de Artefacto Ejecutivo (Markdown)](recursos/plantilla_artefacto_ejecutivo.md)

Rell√©nala con los datos de tu ejecuci√≥n de \`compliance_auditor.py\` y √∫sala como portafolio.

Estructura sugerida:

1. Situaci√≥n actual:
   - ROI actual (por ejemplo, -92%).
   - MTTR estimado (por ejemplo, 4 horas).
   - Nivel de cumplimiento (por ejemplo, 40/100).
2. Tres ajustes realistas:
   - Coste real por hora (ejemplo: 250 ‚Ç¨/h en vez de 100 ‚Ç¨/h).
   - Ahorro real de tiempo (por ejemplo, 23 horas ahorradas gracias a automatizaci√≥n).
   - N√∫mero realista de incidentes anuales.
3. Proyecci√≥n a 3 a√±os:
   - ROI acumulado positivo.
   - Tiempo de payback de la inversi√≥n inicial.
   - ALE evitado estimado por a√±o.
4. Capacidades t√©cnicas ya implementadas:
   - Integraci√≥n f√≠sico‚Äëdigital.
   - An√°lisis asistido por IA.
   - SOAR con m√∫ltiples playbooks.
   - Auditor de cumplimiento conectado al dashboard GRC.

### Paso 4 ‚Äì Prepara tus historias para entrevistas

Convierte tus datos en tres historias breves (2 minutos cada una):

- El momento humilde: cuando el dashboard te mostr√≥ un ROI negativo.
- El descubrimiento: qu√© variables de negocio estabas subestimando.
- La soluci√≥n: c√≥mo ajustar supuestos, integrar m√°s se√±ales (visi√≥n, IA, SOAR) y convertir el ROI en positivo a varios a√±os vista.

### Paso 5 ‚Äì Actualiza tu perfil profesional

En lugar de escribir solo "cre√© scripts de automatizaci√≥n", puedes describir tu trabajo as√≠:

> "Dise√±√© e implement√© una plataforma que correlaciona detecci√≥n f√≠sica, an√°lisis IA y respuesta automatizada, con un modelo de ROI que justifica una inversi√≥n de automatizaci√≥n y muestra retorno proyectado a 3 a√±os."

### Paso 6 ‚Äì Prueba tu narrativa

Explica este caso a alguien no t√©cnico en menos de dos minutos. Si lo entiende, est√°s listo para conversaciones con direcci√≥n, clientes y entrevistas de nivel senior.

### Diagrama: Los 3 niveles de conversaci√≥n GRC

\`\`\`mermaid
flowchart TB
    TECNICO["Nivel 1: T√©cnico\n¬´¬øEst√° parchado?¬ª\n‚Ä¢ Configuraci√≥n SSH\n‚Ä¢ Permisos de archivos"] --> PROCESO["Nivel 2: Proceso\n¬´¬øQui√©n lo revisa?¬ª\n‚Ä¢ Playbook SOAR\n‚Ä¢ Workflow de aprobaci√≥n"]
    PROCESO --> NEGOCIO["Nivel 3: Negocio / Legal\n¬´¬øCu√°nto cuesta si falla?¬ª\n‚Ä¢ ALE: 720.000 $\n‚Ä¢ ROI: +72%\n‚Ä¢ Multas GDPR: hasta 4% de facturaci√≥n"]

    DASH_GRC["Dashboard CyberSentinel\nMuestra los 3 niveles juntos"] --- TECNICO
    DASH_GRC --- PROCESO
    DASH_GRC --- NEGOCIO
\`\`\`

Opcionalmente, puedes hacer que el auditor calcule y registre el ALE autom√°ticamente configurando estas variables de entorno antes de ejecutarlo:

- \`CS_AV\` ‚Äì Valor del activo (AV).  
- \`CS_EF\` ‚Äì Factor de exposici√≥n (EF).  
- \`CS_ARO\` ‚Äì Frecuencia anual (ARO).  

Si las tres est√°n definidas con valores positivos, el script a√±adir√° al reporte un bloque \`risk_model\` con AV, EF, ARO, SLE y ALE.

### Diagrama interactivo: completa el flujo GRC

\`\`\`mermaid
flowchart TB
    INC["Incidente ransomware detectado"] --> SOAR_STEP["[ ] Playbook SOAR ejecutado\n‚Üê ¬øQu√© cap√≠tulo maneja esto?"]
    SOAR_STEP --> LOG_STEP["[ ] Log en /cybersentinel/logs/\n‚Üê ¬øQu√© archivo se genera?"]
    LOG_STEP --> AUD_STEP["[ ] Auditor GRC lee log\n‚Üê ¬øQu√© comando ejecutas?"]
    AUD_STEP --> ALE_STEP["[ ] Calcula ALE = ___ √ó ___\n‚Üê Escribe la f√≥rmula"]
    ALE_STEP --> ROI_STEP["[ ] ROI = ((___ - ___) / ___)\n‚Üê Completa los t√©rminos"]
    ROI_STEP --> DASH_STEP["[ ] Dashboard muestra:\n‚Ä¢ Cumplimiento: ___/100\n‚Ä¢ ROI: ___%\n‚Ä¢ Recomendaci√≥n: _______"]
\`\`\`

Usa este diagrama como ejercicio activo: rellena cada casilla con el cap√≠tulo, archivo, comando o f√≥rmula correcta.

### Parte C: Reporte ejecutivo

Redacta un reporte de una p√°gina dirigido a direcci√≥n:

- Resumen de hallazgos clave del auditor.  
- Riesgo cuantitativo (ALE) estimado.  
- Recomendaciones priorizadas (qu√© parchear o cambiar primero).  

### Parte D: Integraci√≥n con el emulador

En la versi√≥n integrada con el emulador, el auditor puede escribir un resumen en un archivo (por ejemplo, \`compliance_report.json\`) con:

- Puntuaci√≥n de cumplimiento.  
- Lista de controles fallidos.  
- ALE estimado.  

Estructura simplificada del archivo:

\`\`\`json
{
  "timestamp": "...",
  "score": 80,
  "failed_controls": ["SSH_ROOT_LOGIN", "WEB_PERMISSIONS_777"],
  "findings": ["L√≠nea 1 del reporte...", "L√≠nea 2 del reporte..."],
  "risk_model": {
    "AV": 1000000.0,
    "EF": 0.8,
    "ARO": 0.9,
    "SLE": 800000.0,
    "ALE": 720000.0
  }
}
\`\`\`

El dashboard del emulador puede leer este archivo y mostrar en tu panel:

- Nivel de cumplimiento.  
- Riesgo financiero aproximado.  
- Recomendaciones inmediatas.  

---

## üìä CYBERSENTINEL TRACKER - CAP√çTULO 16

Este cap√≠tulo no se trata de *hackear*, se trata de *profesionalizar*.

| Competencia | Criterio de √âxito | Check |
| :--- | :--- | :--- |
| **C√°lculo de Riesgo** | Puedo calcular ALE y justificar una inversi√≥n. | [ ] |
| **√âtica** | Entiendo la diferencia entre Bug Bounty y Cibercrimen. | [ ] |
| **Compliance as Code** | Ejecut√© \`compliance_auditor.py\` y entend√≠ sus fallos. | [ ] |
| **Normativas** | Conozco GDPR, PCI-DSS e ISO 27001 (conceptos b√°sicos). | [ ] |

> **Misi√≥n Final:**
> Ejecuta el auditor en tu m√°quina Linux (o en el emulador).
> Corrige las configuraciones de SSH (\`sudo nano /etc/ssh/sshd_config\`).
> Vuelve a correr el auditor hasta obtener 100/100.
        `;

        // Hack simple para renderizar mermaid: reemplazar ```mermaid ... ``` con <div class="mermaid">...</div> antes de pasar a marked
        const renderer = new marked.Renderer();
        const originalCode = renderer.code;
        renderer.code = function(code, language) {
            if (language === 'mermaid') {
                return '<div class="mermaid">' + code + '</div>';
            }
            return originalCode.call(this, code, language);
        };
        
        document.getElementById('content').innerHTML = marked.parse(markdown, { renderer: renderer });
    </script>
</body>
</html>